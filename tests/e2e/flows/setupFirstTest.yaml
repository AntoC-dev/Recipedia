appId: "com.recipedia"
---
# First test setup - handles onboarding then delegates to standard setup

- launchApp:
    label: "Setup - Launch app"

- extendedWaitUntil:
    visible:
      id: "WelcomeScreen::SkipButton"
    timeout: 1200000
    optional: true
    label: "Check if onboarding appears"

- runFlow:
    file: "handleAnr.yaml"
    label: "Handle ANR dialog if it appears during initialization"

- assertVisible:
    id: "WelcomeScreen::SkipButton"
    label: "Onboarding screen is visible"

- tapOn:
    id: "WelcomeScreen::SkipButton"
    label: "Skip onboarding"

- extendedWaitUntil:
    notVisible:
      id: "WelcomeScreen::LoadingOverlay"
    timeout: 30000
    label: "Wait for data to load"

# Delay before ANR check to let ANR appear if it's going to
- extendedWaitUntil:
    visible:
      id: "NonExistentElement::ForDelay"
    timeout: 3000
    optional: true
    label: "Wait 3s before ANR check"

- runFlow:
    file: "handleAnr.yaml"
    label: "Handle ANR dialog if it appears after data load"

# Now use standard setup (will relaunch app, which is fine)
- runFlow:
    file: "setupTest.yaml"
    label: "Run standard setup after onboarding"
