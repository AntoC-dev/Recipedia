appId: "com.recipedia"
---
# Select N recipes by scrolling and tapping each checkbox
# Expects env variable: RECIPE_COUNT (number of recipes to select)

- evalScript: ${output.currentIndex = 0}

- repeat:
    while:
      true: ${output.currentIndex < RECIPE_COUNT}
    commands:
      - waitForAnimationToEnd

      - scrollUntilVisible:
          element:
            id: "BulkImportDiscovery::(fresh|seen)-${output.currentIndex}"
          direction: DOWN
          speed: 30
          timeout: 30000
          centerElement: true
          label: "Scroll down to load more recipes"

      - waitForAnimationToEnd

      - tapOn:
          id: "BulkImportDiscovery::(fresh|seen)-${output.currentIndex}"

      - evalScript: ${output.currentIndex = output.currentIndex + 1}

      - waitForAnimationToEnd
