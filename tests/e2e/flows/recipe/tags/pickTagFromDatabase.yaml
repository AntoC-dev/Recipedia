appId: "com.recipedia"
---
- tapOn:
    id: "RecipeValidation::ValidationQueue::Tag::SimilarityDialog::PickButton"
    label: "Tap Choose another to open picker"

- assertVisible:
    id: "RecipeValidation::ValidationQueue::Tag::DatabasePicker"
    label: "Database picker is visible"

- tapOn:
    id: "RecipeValidation::ValidationQueue::Tag::DatabasePicker::Searchbar"
    label: "Focus on search bar"

- inputText:
    text: "${SEARCH_TERM}"
    label: "Search for tag in database"

- waitForAnimationToEnd:
    label: "Wait for list to filter"

- runFlow:
    when:
      platform: Android
    commands:
      - hideKeyboard:
          label: "Dismiss keyboard on Android"

- runFlow:
    when:
      platform: iOS
    commands:
      - tapOn:
          id: "Search"
          label: "Tap Done key to dismiss keyboard on iOS"

- tapOn:
    id: "RecipeValidation::ValidationQueue::Tag::DatabasePicker::Item::0"
    label: "Select first matching tag from filtered list"

- assertVisible:
    id: "RecipeValidation::ValidationQueue::Tag::PickConfirmation"
    label: "Confirmation dialog is visible"

- assertVisible:
    id: "RecipeValidation::ValidationQueue::Tag::PickConfirmation::Title"
    text: "Confirm selection"
    label: "Confirmation title is correct"

- assertVisible:
    id: "RecipeValidation::ValidationQueue::Tag::PickConfirmation::ConfirmButton-text"
    text: "Confirm"
    label: "Confirm button is visible"

- assertVisible:
    id: "RecipeValidation::ValidationQueue::Tag::PickConfirmation::CancelButton-text"
    text: "Back"
    label: "Back button is visible"

- tapOn:
    id: "RecipeValidation::ValidationQueue::Tag::PickConfirmation::ConfirmButton"
    label: "Confirm tag selection"
