appId: "com.recipedia"
---

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeIngredients::OpenModal::RoundButton"
    direction: UP
    speed: 40
    centerElement: true
    label: "Scroll to OCR button"

- waitForAnimationToEnd

- tapOn:
    id: "RecipeIngredients::OpenModal::RoundButton"
    label: "Tap on OCR button of recipe ingredients"

- runFlow:
    file: ../android/addMedia.yaml
    env:
      FIELD_NAME: ingredients
    when:
      platform: Android
- runFlow:
    file: ../iOS/addMedia.yaml
    env:
      FIELD_NAME: ingredients
    when:
      platform: iOS

- runFlow:
    file: ../android/selectMostRecentFromModal.yaml
    label: "Select ingredients from modal for OCR"
    when:
      platform: Android
- runFlow:
    file: ../iOS/selectMostRecentFromModal.yaml
    label: "Select ingredients from modal for OCR"
    when:
      platform: iOS

- runFlow:
    file: "../../../validation/validateAllIngredients.yaml"
    env:
      PREFIX: "RecipeValidation"
    label: "Validate all ingredients from OCR"

- extendedWaitUntil:
    visible:
      id: "RecipeIngredients::0::NameInput::CustomTextInput"
    timeout: 10000
    label: "Wait for first ingredient to be populated by OCR"
