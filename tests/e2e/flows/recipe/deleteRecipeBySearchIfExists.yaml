appId: "com.recipedia"
---
- tapOn:
    id: "BottomTabs::Search"
    label: "Navigate to Search screen"

- tapOn:
    id: "SearchScreen::SearchBar"
    label: "Focus on search input"

- inputText:
    text: "${SEARCH_TEXT}"
    label: "Enter search text to find recipe"

- waitForAnimationToEnd:
    label: "Wait for keyboard animation"

- pressKey: "ENTER"

- runFlow:
    file: "../waitForKeyboardDismiss.yaml"
    label: "Wait for keyboard to dismiss"

- runFlow:
    when:
      visible:
        id: "SearchScreen::RecipeCards::0::Cover"
    commands:
      - tapOn:
          id: "SearchScreen::RecipeCards::0::Cover"
          label: "Open recipe from results"

      - tapOn:
          id: "Recipe::AppBar::Delete"
          label: "Delete the recipe"

      - extendedWaitUntil:
          visible:
            id: "Recipe::Dialog::Cancel"
          timeout: 5000

      - tapOn:
          id: "Recipe::Dialog::Confirm"
          label: "Confirm recipe deletion"

      - extendedWaitUntil:
          notVisible:
            id: "Recipe::Dialog::Cancel"
          timeout: 5000

      - tapOn:
          id: "Recipe::Dialog::Confirm"
          label: "Close the confirmation dialog"
    label: "Delete recipe if found"

- runFlow:
    when:
      visible:
        id: "SearchScreen::FiltersSelection::0::Chip"
    commands:
      - tapOn:
          id: "SearchScreen::FiltersSelection::0::Chip"
          label: "Remove the search filter"
    label: "Clear search filter if present"

- tapOn:
    id: "BottomTabs::Home"
    label: "Return to Home screen after cleanup"
