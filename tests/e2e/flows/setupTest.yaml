appId: "com.recipedia"
---
- launchApp:
    label: "Setup - Launch app"

- extendedWaitUntil:
    visible:
      id: "Home::RecipeRecommendation::random::Carousel::Card::0::Cover"
    timeout: 10000
    optional: true
    label: "Wait for app to be ready"

- extendedWaitUntil:
    visible:
      id: "NonExistentElement::ForDelay"
    timeout: 3000
    optional: true
    label: "Wait 3s before ANR check"

- runFlow:
    file: "handleAnr.yaml"
    label: "Handle ANR dialog if it appears during initialization"

- extendedWaitUntil:
    visible:
      id: "Home::RecipeRecommendation::random::Carousel::Card::0::Cover"
    timeout: 30000
    optional: true
    label: "Wait for app to be ready"

- assertVisible:
    id: "Home::RecipeRecommendation::random::Carousel::Card::0::Cover"
    label: "Verify app is ready"

- runFlow:
    file: "handleAnr.yaml"
    label: "Handle ANR dialog if it appears after home render"

# FAB IDs use regex pattern because React Native Paper adds "-container-outer-layer" suffix on iOS
- extendedWaitUntil:
    visible:
      id: "ExpandButton.*"
    timeout: 5000
    label: "Wait for FAB to be visible"

- waitForAnimationToEnd:
    timeout: 3000
    label: "Wait for FAB mount animation to complete"

- runFlow:
    file: "handleAnr.yaml"
    label: "Handle ANR dialog if it appears after loading"

- runFlow:
    file: "warmupScreens.yaml"
    label: "Warmup screens to exhaust ANR issues"
