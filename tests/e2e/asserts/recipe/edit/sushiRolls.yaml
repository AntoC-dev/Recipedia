appId: "com.recipedia"
---
- runFlow:
    file: "../common/buttonsEdit.yaml"
    label: "Assert edit mode buttons are displayed"
- assertVisible:
    id: "RecipeImage::RoundButton"
    label: "OCR image button is still rendered"
- assertVisible:
    text: "󰄀"
    label: "Add image button has the right icon"
- assertVisible:
    id: "RecipeImage"
    label: "Image is rendered"
- assertVisible:
    id: "RecipeTitle::Text"
    text: "Title:"
    label: "Intro text for the title is rendered"
- assertVisible:
    id: "RecipeTitle::CustomTextInput"
    text: "Sushi Rolls"
    label: "Title of the recipe is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeDescription::CustomTextInput"
    direction: DOWN
    speed: 60
    centerElement: true

- waitForAnimationToEnd

- assertVisible:
    id: "RecipeDescription::Text"
    text: "Description:"
    label: "Intro text for the description is rendered"
- assertVisible:
    id: "RecipeDescription::CustomTextInput"
    text: "CLASSIC SUSHI ROLLS WITH NORI, RICE, AND FILLINGS."
    label: "Description of the recipe is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeTags::HeaderText"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the tags section"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipeTags::HeaderText"
    text: "Tags:"
    label: "Intro text for the tags is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeTags::ElementText"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the element text"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipeTags::ElementText"
    text: "Tags are a way to identify a recipe and make easier its search.\nHere are some examples of tags you can have : .*, .*, .*"
    label: "Explanation text for the tags is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeTags::0::Chip"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the first tag"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipeTags::0::Chip"
    label: "First tag chip is rendered"
- assertVisible:
    text: "Japanese"
    label: "First tag of the recipe is rendered"

- runFlow:
    when:
      platform: Android
    commands:
      - assertVisible:
          text: "󰅖"
          index: 0
          label: "Cross icon of the first tag is rendered on Android"

- runFlow:
    when:
      platform: iOS
    commands:
      - assertVisible:
          text: "Close"
          index: 0
          label: "Cross icon of the first tag is rendered on iOS"

- assertVisible:
    id: "RecipeTags::1::Chip"
    label: "Second tag chip is rendered"
- assertVisible:
    text: "Seafood"
    label: "Second tag of the recipe is rendered"

- runFlow:
    when:
      platform: Android
    commands:
      - assertVisible:
          text: "󰅖"
          index: 1
          label: "Cross icon of the first tag is rendered on Android"

- runFlow:
    when:
      platform: iOS
    commands:
      - assertVisible:
          text: "Close"
          index: 1
          label: "Cross icon of the first tag is rendered on iOS"

- assertVisible:
    text: "󰐕"
    label: "Add button for the tag is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePersons::PrefixText"
    direction: DOWN
    speed: 60
    centerElement: true

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePersons::PrefixText"
    text: "This recipe is for : "
    label: "Intro text for the number of persons is rendered"
- assertVisible:
    id: "RecipePersons::NumericTextInput"
    text: "4"
    label: "Number of persons is rendered"
- assertVisible:
    id: "RecipePersons::SuffixText"
    text: " persons"
    label: "Outro text for the number of persons is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeIngredients::Header::Quantity"
    direction: DOWN
    speed: 60
    centerElement: true

- waitForAnimationToEnd

- assertVisible:
    id: "RecipeIngredients::PrefixText"
    text: "Ingredients: "
    label: "Section Ingredients is rendered"
- assertVisible:
    id: "RecipeIngredients::Header::Quantity"
    text: "Quantity"
    label: "Column Quantity is rendered"
- assertVisible:
    id: "RecipeIngredients::Header::Unit"
    text: "Unit"
    label: "Column Unit is rendered"
- assertVisible:
    id: "RecipeIngredients::Header::IngredientName"
    text: "Name"
    label: "Column Ingredient name is rendered"
- assertVisible:
    id: "RecipeIngredients::0::QuantityInput"
    text: "250"
    label: "Quantity of first ingredient is rendered"
- assertVisible:
    id: "RecipeIngredients::0::Unit"
    text: "g"
    label: "First occurrence of the g unit is rendered"
- assertVisible:
    id: "RecipeIngredients::0::NameInput::CustomTextInput"
    text: "Sushi Rice"
    label: "Ingredient Sushi Rice is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeIngredients::2::NameInput::CustomTextInput"
    direction: DOWN
    speed: 60
    centerElement: true

- waitForAnimationToEnd

- assertVisible:
    id: "RecipeIngredients::1::QuantityInput"
    text: "5"
    label: "Quantity of second ingredient is rendered"
- assertVisible:
    id: "RecipeIngredients::1::Unit"
    text: "pieces"
    label: "Pieces unit is rendered"
- assertVisible:
    id: "RecipeIngredients::1::NameInput::CustomTextInput"
    text: "Nori Sheets"
    label: "Ingredient Nori Sheets is rendered"
- assertVisible:
    id: "RecipeIngredients::2::QuantityInput"
    text: "200"
    label: "Quantity of third ingredient is rendered"
- assertVisible:
    id: "RecipeIngredients::2::Unit"
    text: "g"
    label: "Second occurrence of the g unit is rendered"
- assertVisible:
    id: "RecipeIngredients::2::NameInput::CustomTextInput"
    text: "Salmon"
    label: "Ingredient Salmon is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeIngredients::3::QuantityInput"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the third ingredient"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipeIngredients::3::QuantityInput"
    text: "100"
    label: "Quantity of fourth ingredient is rendered"
- assertVisible:
    id: "RecipeIngredients::3::Unit"
    text: "g"
    label: "Third occurrence of the g unit is rendered"
- assertVisible:
    id: "RecipeIngredients::3::NameInput::CustomTextInput"
    text: "Avocado"
    label: "Ingredient Avocado is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeIngredients::4::NameInput::CustomTextInput"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the end of ingredients section"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipeIngredients::4::QuantityInput"
    text: "50"
    label: "Quantity of fifth ingredient is rendered"
- assertVisible:
    id: "RecipeIngredients::4::Unit"
    text: "ml"
    label: "ml unit is rendered"
- assertVisible:
    id: "RecipeIngredients::4::NameInput::CustomTextInput"
    text: "Soy Sauce"
    label: "Ingredient Soy Sauce is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeIngredients::AddButton::RoundButton"
    direction: DOWN
    speed: 60
    centerElement: true
    label: "Scroll down to ingredients add button"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipeIngredients::AddButton::RoundButton"
    label: "Add button of the ingredients is rendered"

- assertVisible:
    text: "󰐕"
    label: "Add button of the ingredients has the correct icon"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeTime::NumericTextInput"
    direction: DOWN
    speed: 60
    centerElement: true
    label: "Scroll down to the time to prepare"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipeTime::PrefixText"
    text: "Time to prepare the recipe :"
    label: "Intro text for the time to prepare is rendered"
- assertVisible:
    id: "RecipeTime::NumericTextInput"
    text: "45"
    label: "Time to prepare is rendered"
- assertVisible:
    id: "RecipeTime::SuffixText"
    text: "min"
    label: "Outro text for the time to prepare is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::PrefixText"
    direction: DOWN
    speed: 60
    centerElement: true
    label: "Scroll down to the preparation prefix"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::PrefixText"
    text: "Preparation :"
    label: "Preparation prefix text is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::0::Step"
    direction: DOWN
    speed: 60
    centerElement: true
    label: "Scroll down to the preparation step"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::0::Step"
    direction: DOWN
    speed: 60
    centerElement: true
    label: "Scroll down to the first preparation step"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::0::Step"
    text: "Step 1"
    label: "Preparation section for first step is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::0::Title"
    direction: DOWN
    speed: 60
    centerElement: true
    label: "Scroll down to the title of first step"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::0::Title"
    text: "Title of step 1 : "
    label: "Intro text for the title of first step is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::0::TextInputTitle::CustomTextInput"
    direction: DOWN
    speed: 60
    centerElement: true
    label: "Scroll down to the title of first step"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::0::TextInputTitle::CustomTextInput"
    text: "Prepare rice"
    label: "First preparation step title is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::0::Content"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the first step content"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::0::Content"
    text: "Content of step 1 : "
    label: "Intro text for first step is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::0::TextInputContent::CustomTextInput"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the first step content input"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::0::TextInputContent::CustomTextInput"
    label: "First step input is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::1::Step"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the second step input"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::1::Step"
    text: "Step 2"
    label: "Preparation section for second step is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::1::Title"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the title of second step"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::1::Title"
    text: "Title of step 2 : "
    label: "Intro text for the title of second step is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::1::TextInputTitle::CustomTextInput"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the title of second step"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::1::TextInputTitle::CustomTextInput"
    text: "Spread rice"
    label: "Second preparation step title is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::1::Content"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the second step input"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::1::Content"
    text: "Content of step 2 : "
    label: "Intro text for second step is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::1::TextInputContent::CustomTextInput"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the second step input"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::1::TextInputContent::CustomTextInput"
    label: "Second step input is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::2::Step"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the third step input"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::2::Step"
    text: "Step 3"
    label: "Preparation section for third step is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::2::Title"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the title of third step"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::2::Title"
    text: "Title of step 3 : "
    label: "Intro text for the title of third step is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::2::TextInputTitle::CustomTextInput"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the title of third step"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::2::TextInputTitle::CustomTextInput"
    text: "Add fillings and roll"
    label: "Third preparation step title is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::2::Content"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the third step input"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::2::Content"
    text: "Content of step 3 : "
    label: "Intro text for third step is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::2::TextInputContent::CustomTextInput"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the third step input"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::2::TextInputContent::CustomTextInput"
    label: "Third step input is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::3::Step"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the fourth step input"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::3::Step"
    text: "Step 4"
    label: "Preparation section for Fourth step is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::3::Title"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the title of Fourth step"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::3::Title"
    text: "Title of step 4 : "
    label: "Intro text for the title of Fourth step is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::3::TextInputTitle::CustomTextInput"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the title of Fourth step"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::3::TextInputTitle::CustomTextInput"
    text: "Serve"
    label: "Fourth preparation step title is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::3::Content"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the fourth step input"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::3::Content"
    text: "Content of step 4 : "
    label: "Intro text for Fourth step is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::EditableStep::3::TextInputContent::CustomTextInput"
    direction: DOWN
    speed: 40
    centerElement: true
    label: "Scroll down to the fourth step input"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::EditableStep::3::TextInputContent::CustomTextInput"
    label: "Fourth step input is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::AddButton::RoundButton"
    direction: DOWN
    speed: 40
    centerElement: true

- waitForAnimationToEnd

- assertVisible:
    text: "󰐕"
    label: "Add button of the preparation is rendered"

- runFlow:
    file: "../common/nutritionEdit.yaml"
    env:
      ENERGY_KCAL: "195"
      ENERGY_KJ: "816"
      FAT: "8.2"
      SATURATED_FAT: "1.8"
      CARBOHYDRATES: "22"
      SUGARS: "2.5"
      FIBER: "1.2"
      PROTEIN: "12.5"
      SALT: "1.85"
      PORTION_WEIGHT: "160"
    label: "Assert nutrition table is displayed with correct values"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeImage::Image"
    direction: UP
    centerElement: true
    speed: 85
    timeout: 120000
    label: "Scroll back to top"

- waitForAnimationToEnd
