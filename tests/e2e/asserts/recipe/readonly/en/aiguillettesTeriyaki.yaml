appId: "com.recipedia"
---
- runFlow:
    file: "../../common/buttonsReadOnly.yaml"
    label: "Assert common ReadOnly buttons and image"

- assertVisible:
    id: "RecipeTitle::Text"
    text: "Aiguillettes de poulet façon teriyaki avec des légumes poêlés & du riz basmati"
    label: "Title text is displayed"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeDescription::Text"
    direction: DOWN
    centerElement: true
    speed: 60

- waitForAnimationToEnd

- assertVisible:
    id: "RecipeDescription::Text"
    text: "La sauce teriyaki .*"
    label: "Description of the recipe is rendered"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeTags::0::Chip"
    direction: DOWN
    centerElement: true
    speed: 60

- waitForAnimationToEnd

- assertVisible:
    id: "RecipeTags::0::Chip"
    label: "First tag is rendered"

- assertVisible:
    text: "<650kcal"
    label: "First tag name is rendered"

- assertVisible:
    id: "RecipeTags::1::Chip"
    label: "Second tag is rendered"

- assertVisible:
    text: "Familial.*"
    label: "Tag contains 'Familial'"

- assertVisible:
    text: ".*Rapido"
    label: "Tag contains 'Rapido'"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePersons::Text"
    direction: DOWN
    speed: 40
    centerElement: true

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePersons::Text"
    text: "Ingredients (4 persons)"
    label: "Ingredient section and persons is displayed"

- runFlow:
    file: "../../common/assertIngredient.yaml"
    env:
      INGREDIENT_NAME: "Riz basmati"
      INGREDIENT_QUANTITY_AND_UNIT: "140 g"
    label: "Assert riz basmati ingredient"

- runFlow:
    file: "../../common/assertIngredient.yaml"
    env:
      INGREDIENT_NAME: "Oignon jaune"
      INGREDIENT_QUANTITY_AND_UNIT: "1 g"
    label: "Assert riz basmati ingredient"

- runFlow:
    file: "../../common/assertIngredient.yaml"
    env:
      INGREDIENT_NAME: "Carotte"
      INGREDIENT_QUANTITY_AND_UNIT: "1 g"
    label: "Assert Carotte ingredient"

- runFlow:
    file: "../../common/assertIngredient.yaml"
    env:
      INGREDIENT_NAME: "Poireau"
      INGREDIENT_QUANTITY_AND_UNIT: "1 g"
    label: "Assert Poireau ingredient"

- runFlow:
    file: "../../common/assertIngredient.yaml"
    env:
      INGREDIENT_NAME: "Ciboulette"
      INGREDIENT_QUANTITY_AND_UNIT: "3g g"
    label: "Assert Ciboulette ingredient"

- runFlow:
    file: "../../common/assertIngredient.yaml"
    env:
      INGREDIENT_NAME: "Gingembre frais"
      INGREDIENT_QUANTITY_AND_UNIT: "2 g"
    label: "Assert Gingembre frais ingredient"

- runFlow:
    file: "../../common/assertIngredient.yaml"
    env:
      INGREDIENT_NAME: "Sauce soja"
      INGREDIENT_QUANTITY_AND_UNIT: "40 g"
    label: "Assert Sauce soja ingredient"

- runFlow:
    file: "../../common/assertIngredient.yaml"
    env:
      INGREDIENT_NAME: "Huile de sésame"
      INGREDIENT_QUANTITY_AND_UNIT: "10 g"
    label: "Assert Huile de sésame ingredient"

- runFlow:
    file: "../../common/assertIngredient.yaml"
    env:
      INGREDIENT_NAME: "Filet de poulet"
      INGREDIENT_QUANTITY_AND_UNIT: "2 g"
    label: "Assert Filet de poulet ingredient"

- runFlow:
    file: "../../common/assertIngredient.yaml"
    env:
      INGREDIENT_NAME: "Gomasio"
      INGREDIENT_QUANTITY_AND_UNIT: "2 g"
    label: "Assert Gomasio ingredient"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipeTime::Text"
    direction: DOWN
    centerElement: true
    speed: 40
    label: "Scroll to time section"

- waitForAnimationToEnd

- assertVisible:
    id: "RecipeTime::Text"
    text: "Preparation (30 min)"
    label: "Preparation section and time are displayed"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::ReadOnlyStep::0::SectionTitle"
    direction: DOWN
    centerElement: true
    speed: 60

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::ReadOnlyStep::0::SectionTitle"
    text: "1) Cuire le riz"
    label: "First preparation title is displayed"

- assertVisible:
    id: "RecipePreparation::ReadOnlyStep::0::SectionParagraph"
    text: "[\\s\\S]+"
    label: "First preparation paragraph is displayed"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::ReadOnlyStep::1::SectionTitle"
    direction: DOWN
    centerElement: true
    speed: 60

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::ReadOnlyStep::1::SectionTitle"
    text: "2) Cuire les légumes"
    label: "Second preparation title is displayed"

- assertVisible:
    id: "RecipePreparation::ReadOnlyStep::1::SectionParagraph"
    text: "[\\s\\S]+"
    label: "Second preparation paragraph is displayed"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::ReadOnlyStep::2::SectionTitle"
    direction: DOWN
    centerElement: true
    speed: 60

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::ReadOnlyStep::2::SectionTitle"
    text: "3) Faire la sauce"
    label: "Third preparation title is displayed"

- assertVisible:
    id: "RecipePreparation::ReadOnlyStep::2::SectionParagraph"
    text: "[\\s\\S]+"
    label: "Third preparation paragraph is displayed"

- waitForAnimationToEnd

- scrollUntilVisible:
    element:
      id: "RecipePreparation::ReadOnlyStep::3::SectionParagraph"
    direction: DOWN
    speed: 60
    centerElement: true

- waitForAnimationToEnd

- assertVisible:
    id: "RecipePreparation::ReadOnlyStep::3::SectionTitle"
    text: "4) Finir et servir"
    label: "Fourth preparation title is displayed"

- assertVisible:
    id: "RecipePreparation::ReadOnlyStep::3::SectionParagraph"
    text: "[\\s\\S]+"
    label: "Fourth preparation paragraph is displayed"

- assertNotVisible:
    id: "Recipe::RecipeNutrition::NutritionTable"
    label: "Nutrition table is not displayed (no nutrition data)"
